{% sw_extends '@Storefront/storefront/base.html.twig' %}

{% block base_content %}
    <style>
        .product-card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
            background-color: #f4f4f4;
        }

        .product-card {
            background-color: white;
            min-height: 480px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.05);
            transition: 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        .product-image {
            width: 100%;
            min-height: 400px;
            object-fit: cover;
            background-color: #eee;
        }

        .product-card-content {
            padding: 1rem;
            flex-grow: 1;
        }

        .product-card__title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #222;
        }

        .product-card__description {
            font-size: 0.95rem;
            color: #555;
        }
        .digital-clock {
            font-family: 'Courier New', Courier, monospace;
            font-size: 5rem;
            color: #333;
            background-color: white;
            padding: 0.75rem 1.5rem;

            border-radius: 10px;
            text-align: center;
            width: fit-content;
            margin: auto;
            margin-bottom:10px;
            letter-spacing: 2px;
            transition: box-shadow 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);

        }

        .digital-clock:hover {
        }

    </style>
{#    <div data-ajax-plugin>#}
{#        Loading JSON message...#}
{#    </div>#}
    <div data-ajax-plugin>
    </div>
    <h2>Test Filter Result:</h2>
    <p>{{ filteredString }}</p>

    <div class="product-card-grid">
        {% for product in products %}
            {% if product.cover and product.cover.media and product.cover.media.url %}
                <a href="{{ path('frontend.detail.page', { productId: product.id }) }}" style="text-decoration: none; color: inherit;">
                    <div class="product-card">
                        <img class="product-image" src="{{ product.cover.media.url }}" alt="{{ product.translated.name }}">
                        <div class="product-card-content">
                            <div class="product-card__title">{{ product.translated.name }}</div>

                            {% set rawPrice = product.price.first %}
                            {% if rawPrice %}
                                <p class="product-price">{{ rawPrice.gross|currency }}</p>
                            {% else %}
                                <p class="product-price">No price</p>
                            {% endif %}

                            <div class="product-card__description">
                                {{ product.translated.description|default('No description') }}
                            </div>
                        </div>
                    </div>
                </a>
            {% endif %}
        {% endfor %}


    </div>
{% endblock %}
